FROM caddy:2-alpine

# Copy the managed Caddyfile
COPY ./apps/proxy/Caddyfile /etc/caddy/Caddyfile

# Copy error pages
COPY ./apps/proxy/errors /srv/errors

# Expose port 80 (Railway handles external TLS termination)
EXPOSE 80

CMD ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile", "--debug"]

